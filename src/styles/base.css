/* Midnight Slate (dark) дизайн-система */
:root{
  --bg:#0b0f14;        /* фон страницы */
  --panel:#11161d;     /* фон карточек/fieldset */
  --panel-2:#0f141a;   /* фон полей ввода */
  --fg:#e8edf2;        /* основной текст */
  --muted:#9aa4af;     /* вторичный текст */
  --border:#1f2a36;    /* границы */
  --primary:#3b82f6;   /* акцент */
  --primary-fg:#ffffff;
  --success:#10b981; --error:#ef4444; --warn:#f59e0b;
  --radius:12px;       /* скругление */
  --gap:12px; --gap-lg:18px;
  --maxw:1040px;       /* ширина контейнера */
  --font:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  --shadow:0 1px 2px rgba(0,0,0,.25),0 8px 30px rgba(0,0,0,.25);
}
html{color-scheme:dark}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--fg);font:15px/1.6 var(--font);-webkit-font-smoothing:antialiased}
h1{font-size:28px;margin:0 0 10px}
h2{font-size:19px;margin:18px 0 8px}
p,small{color:var(--muted)}
.container{ max-width: 1024px; margin: 0 auto; padding: 32px 24px }
.content-narrow{ max-width: 820px; margin: 0 auto }
.section{ margin: 20px 0 }
.page-title{ margin:0 }
.center-text{ text-align: center }
.muted{ color:var(--muted) }

/* Карточки/блоки */
.card{ background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow) }
.card__body{ padding:16px }
.tpl-title{ font-weight:600; margin-bottom:4px }
.tpl-note{ color:var(--muted); margin-bottom:8px }

/* Кнопки */
.btn{ display:inline-flex; align-items:center; justify-content:center; gap:8px;
  height:40px; padding:0 14px; border-radius:10px; border:1px solid var(--border);
  background:var(--panel-2); color:var(--fg); cursor:pointer;
  transition: background .15s ease, border-color .15s ease, transform .05s ease;
}
.btn:hover{ border-color:#2b3948 }
.btn:active{ transform: translateY(1px) }
.btn[disabled]{ opacity:.55; cursor:not-allowed; filter:saturate(.6) }
.btn-sm{ height:34px; padding:0 12px; font-size:13px }
.btn-lg{ height:46px; padding:0 18px; font-size:16px }
.btn-primary{ background: var(--primary); color: var(--primary-fg); border-color: transparent }
.btn-primary:hover{ filter:brightness(1.05) }
.btn-outline{ background: transparent }
.btn-ghost{ background: transparent; border-color: transparent; color: var(--muted) }
.btn.is-active{ box-shadow: inset 0 0 0 1px rgba(255,255,255,.15) }

/* Формы */
fieldset{border:1px solid var(--border);border-radius:var(--radius);padding:16px;background:var(--panel)}
legend{padding:0 6px;color:var(--fg);font-weight:600}
label{display:grid;gap:6px}
input,textarea,select{
  width:100%; min-height:44px; padding:12px 14px;
  border-radius:12px; border:1px solid var(--border);
  background:var(--panel-2); color:var(--fg);
  box-shadow:inset 0 0 0 1px transparent;
  caret-color:var(--primary);
}
input.input-error, textarea.input-error, select.input-error{
  border-color: var(--error);
  box-shadow: 0 0 0 3px rgba(239,68,68,.15);
}
input::placeholder,textarea::placeholder{ color: var(--muted) }
input:focus-visible,textarea:focus-visible,select:focus-visible{
  outline:2px solid var(--primary); outline-offset:2px;
  box-shadow:0 0 0 4px rgba(59,130,246,.15);
}
.field{ display:grid; gap:6px }
.field--row{ display:grid; gap:6px }
.hint{ font-size:12px; color:var(--muted); margin-top:4px }
.error{ color:var(--error); font-size:12px; margin-top:4px }

/* Статус-бар */
.status-bar{ position:sticky; bottom:0; left:0; right:0; margin-top:16px }
.status-bar .success{ background: rgba(16,185,129,.12); border:1px solid rgba(16,185,129,.35); color:#d1fae5; padding:10px 12px; border-radius:10px; white-space:pre-line }
.status-bar .error{ background: rgba(239,68,68,.12); border:1px solid rgba(239,68,68,.35); color:#fecaca; padding:10px 12px; border-radius:10px; white-space:pre-line }

/* Сетки */
.grid-2{display:grid;gap:var(--gap);grid-template-columns:repeat(2,1fr)}
.grid-3{display:grid;gap:var(--gap);grid-template-columns:repeat(3,1fr)}
@media (max-width:840px){.grid-2,.grid-3{grid-template-columns:1fr}}

/* Галерея шаблонов */
.tpl-grid-wrap{ width:100%; margin-inline:auto }
.tpl-grid{
  display:grid; gap:16px;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
  align-items:stretch;
}
@media (max-width:720px){ .tpl-grid{ grid-template-columns:1fr } }

/* Кнопки и действия формы */
.actions{
  display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-top:16px;
}

/* Верхняя панель */
.toolbar{
  width:100%;
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  margin-bottom:12px;
}

/* Визуальный фон-градиент */
body::before{
  content:"";
  position:fixed; inset:0;
  background: radial-gradient(600px 300px at 50% -100px, rgba(59,130,246,.12), transparent 55%),
              radial-gradient(500px 250px at 80% 120%, rgba(16,185,129,.08), transparent 60%);
  pointer-events:none; z-index:-1;
}

/* Доступность */
:focus-visible{outline:2px solid var(--primary);outline-offset:2px}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
@media (prefers-reduced-motion:reduce){*{animation:none;transition:none}}

/* Удалены старые и конфликтные правила, всё приведено к единому стилю */

/* Инспектор таблицы */
table{ width:100%; border-collapse:collapse; background:var(--panel) }
th,td{ border-top:1px solid var(--border); padding:10px; text-align:left; vertical-align:top }
td{ word-break:break-word }
.badge{ display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px }
.badge--match{ background:#065f46; color:#d1fae5 }
.badge--alias{ background:#1e3a8a; color:#dbeafe }
.badge--unknown{ background:#7c2d12; color:#ffedd5 }
.badge--nonstd{ background:#3f3f46; color:#e4e4e7 }
